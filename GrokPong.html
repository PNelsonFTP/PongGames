<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong Game</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        #gameCanvas {
            border: 2px solid #333;
            background-color: #fff;
        }
        #instructions {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: #333;
        }
        #score {
            font-size: 24px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div id="instructions">
        <div id="score">Player 1: 0 - Player 2: 0</div>
        <p>Player 1: W (up) / Z (down) | Player 2: ↑ (up) / ↓ (down) | Space: Launch ball</p>
    </div>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('score');

        // Game constants
        const PADDLE_WIDTH = 10;
        const PADDLE_HEIGHT = 100;
        const PADDLE_SPEED = 6;
        const BALL_RADIUS = 5;
        const BALL_BASE_SPEED = 4;
        const MAX_BALLS = 10; // Limit to prevent too many balls

        // Game state
        let player1Score = 0;
        let player2Score = 0;
        let balls = [];
        let leftPaddle = { x: 10, y: canvas.height / 2 - PADDLE_HEIGHT / 2, width: PADDLE_WIDTH, height: PADDLE_HEIGHT, dy: 0 };
        let rightPaddle = { x: canvas.width - 20, y: canvas.height / 2 - PADDLE_HEIGHT / 2, width: PADDLE_WIDTH, height: PADDLE_HEIGHT, dy: 0 };

        // Key handling
        const keys = {};
        window.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            if (e.key === ' ' && balls.length < MAX_BALLS) {
                launchBall();
            }
        });
        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        function launchBall() {
            const direction = Math.random() > 0.5 ? 1 : -1;
            const angle = (Math.random() - 0.5) * Math.PI / 2; // Random angle between -45 and 45 degrees
            const vx = BALL_BASE_SPEED * direction * Math.cos(angle);
            const vy = BALL_BASE_SPEED * Math.sin(angle);
            balls.push({
                x: canvas.width / 2,
                y: canvas.height / 2,
                vx: vx,
                vy: vy,
                radius: BALL_RADIUS,
                speedMultiplier: 1
            });
        }

        function updatePaddles() {
            // Player 1 (left)
            if (keys['w'] || keys['W']) leftPaddle.y -= PADDLE_SPEED;
            if (keys['z'] || keys['Z']) leftPaddle.y += PADDLE_SPEED;
            leftPaddle.y = Math.max(0, Math.min(canvas.height - leftPaddle.height, leftPaddle.y));

            // Player 2 (right)
            if (keys['ArrowUp']) rightPaddle.y -= PADDLE_SPEED;
            if (keys['ArrowDown']) rightPaddle.y += PADDLE_SPEED;
            rightPaddle.y = Math.max(0, Math.min(canvas.height - rightPaddle.height, rightPaddle.y));
        }

        function updateBalls() {
            for (let i = balls.length - 1; i >= 0; i--) {
                const ball = balls[i];
                ball.x += ball.vx * ball.speedMultiplier;
                ball.y += ball.vy * ball.speedMultiplier;

                // Wall collisions (top/bottom)
                if (ball.y - ball.radius < 0 || ball.y + ball.radius > canvas.height) {
                    ball.vy = -ball.vy;
                }

                // Paddle collisions
                if (ball.x - ball.radius < leftPaddle.x + leftPaddle.width &&
                    ball.x + ball.radius > leftPaddle.x &&
                    ball.y > leftPaddle.y &&
                    ball.y < leftPaddle.y + leftPaddle.height) {
                    ball.vx = -ball.vx;
                    ball.vy += (ball.y - (leftPaddle.y + leftPaddle.height / 2)) / (leftPaddle.height / 2) * 2; // Add angle based on hit position
                    ball.speedMultiplier += 0.1; // Increase speed slightly
                }

                if (ball.x + ball.radius > rightPaddle.x &&
                    ball.x - ball.radius < rightPaddle.x + rightPaddle.width &&
                    ball.y > rightPaddle.y &&
                    ball.y < rightPaddle.y + rightPaddle.height) {
                    ball.vx = -ball.vx;
                    ball.vy += (ball.y - (rightPaddle.y + rightPaddle.height / 2)) / (rightPaddle.height / 2) * 2; // Add angle
                    ball.speedMultiplier += 0.1; // Increase speed
                }

                // Scoring (remove ball and update score)
                if (ball.x - ball.radius < 0) {
                    player2Score++;
                    balls.splice(i, 1);
                } else if (ball.x + ball.radius > canvas.width) {
                    player1Score++;
                    balls.splice(i, 1);
                }
            }
            updateScore();
        }

        function updateScore() {
            scoreDisplay.textContent = `Player 1: ${player1Score} - Player 2: ${player2Score}`;
            if (player1Score >= 10 || player2Score >= 10) {
                alert(`${player1Score >= 10 ? 'Player 1' : 'Player 2'} wins!`);
                resetGame();
            }
        }

        function resetGame() {
            player1Score = 0;
            player2Score = 0;
            balls = [];
            leftPaddle.y = canvas.height / 2 - PADDLE_HEIGHT / 2;
            rightPaddle.y = canvas.height / 2 - PADDLE_HEIGHT / 2;
            updateScore();
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw paddles
            ctx.fillStyle = '#333';
            ctx.fillRect(leftPaddle.x, leftPaddle.y, leftPaddle.width, leftPaddle.height);
            ctx.fillRect(rightPaddle.x, rightPaddle.y, rightPaddle.width, rightPaddle.height);

            // Draw balls
            ctx.fillStyle = '#f00';
            balls.forEach(ball => {
                ctx.beginPath();
                ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
                ctx.fill();
            });

            // Draw center line
            ctx.strokeStyle = '#ccc';
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.stroke();
        }

        function gameLoop() {
            updatePaddles();
            updateBalls();
            draw();
            requestAnimationFrame(gameLoop);
        }

        gameLoop();
    </script>
</body>
</html>